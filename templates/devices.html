<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--<meta charset="UTF-8">-->
<!--<title>My Devices | SHEMS</title>-->

<!--<style>-->
<!--:root {-->
<!--  --bg: #f5f7fb;-->
<!--  --card: #ffffff;-->
<!--  --text: #1e293b;-->
<!--  --muted: #64748b;-->
<!--  --primary: #2563eb;-->
<!--  --border: #e2e8f0;-->
<!--  --success: #16a34a;-->
<!--  --danger: #dc2626;-->
<!--}-->

<!--body.dark {-->
<!--  --bg: #0b1220;-->
<!--  --card: #111827;-->
<!--  --text: #f8fafc;-->
<!--  --muted: #9ca3af;-->
<!--  --border: #1f2937;-->
<!--}-->

<!--body {-->
<!--  margin: 0;-->
<!--  font-family: "Inter", Segoe UI, sans-serif;-->
<!--  background: var(--bg);-->
<!--  color: var(--text);-->
<!--}-->

<!--/* Sidebar */-->
<!--.sidebar {-->
<!--  width: 230px;-->
<!--  height: 100vh;-->
<!--  background: linear-gradient(180deg,#0f172a,#0b1220);-->
<!--  position: fixed;-->
<!--  padding-top: 30px;-->
<!--  color: white;-->
<!--}-->
<!--.sidebar h2 {-->
<!--  text-align: center;-->
<!--  margin-bottom: 35px;-->
<!--  font-size: 18px;-->
<!--}-->
<!--.sidebar a {-->
<!--  display: block;-->
<!--  padding: 14px 30px;-->
<!--  color: #cbd5e1;-->
<!--  text-decoration: none;-->
<!--  font-size: 14px;-->
<!--}-->
<!--.sidebar a.active,-->
<!--.sidebar a:hover {-->
<!--  background: rgba(255,255,255,0.05);-->
<!--  color: #fff;-->
<!--  border-left: 3px solid var(--primary);-->
<!--}-->

<!--/* Main Layout */-->
<!--.main {-->
<!--  margin-left: 230px;-->
<!--}-->

<!--/* Topbar */-->
<!--.topbar {-->
<!--  height: 90px;-->
<!--  background: linear-gradient(90deg,#2563eb,#1e40af);-->
<!--  display: flex;-->
<!--  align-items: center;-->
<!--  justify-content: space-between;-->
<!--  padding: 0 40px;-->
<!--  color: white;-->
<!--}-->
<!--.topbar h1 {-->
<!--  margin: 0;-->
<!--  font-size: 22px;-->
<!--}-->

<!--/* Theme Switch */-->
<!--.theme-switch {-->
<!--  width: 46px;-->
<!--  height: 24px;-->
<!--  background: #bfdbfe;-->
<!--  border-radius: 20px;-->
<!--  position: relative;-->
<!--  cursor: pointer;-->
<!--}-->

<!--.theme-switch::before {-->
<!--  content: "";-->
<!--  position: absolute;-->
<!--  width: 18px;-->
<!--  height: 18px;-->
<!--  background: white;-->
<!--  border-radius: 50%;-->
<!--  top: 3px;-->
<!--  left: 3px;-->
<!--  transition: 0.3s;-->
<!--}-->

<!--body.dark .theme-switch { background: #60a5fa; }-->
<!--body.dark .theme-switch::before { transform: translateX(22px); }-->

<!--/* Content */-->
<!--.content {-->
<!--  padding: 40px;-->
<!--}-->

<!--/* Card */-->
<!--.card {-->
<!--  background: var(--card);-->
<!--  border: 1px solid var(--border);-->
<!--  border-radius: 14px;-->
<!--  padding: 28px;-->
<!--  margin-bottom: 32px;-->
<!--  box-shadow: 0 8px 20px rgba(0,0,0,0.04);-->
<!--}-->
<!--.card h2 {-->
<!--  margin: 0;-->
<!--  font-size: 18px;-->
<!--}-->
<!--.card p {-->
<!--  color: var(--muted);-->
<!--  margin: 6px 0 18px;-->
<!--  font-size: 14px;-->
<!--}-->

<!--/* Form */-->
<!--.form-grid {-->
<!--  display: grid;-->
<!--  grid-template-columns: repeat(2, 1fr);-->
<!--  gap: 22px;-->
<!--}-->
<!--.form-group {-->
<!--  display: flex;-->
<!--  flex-direction: column;-->
<!--}-->
<!--.form-group label {-->
<!--  font-size: 13px;-->
<!--  font-weight: 600;-->
<!--  margin-bottom: 6px;-->
<!--}-->
<!--.form-group input {-->
<!--  padding: 12px;-->
<!--  border-radius: 8px;-->
<!--  border: 1px solid var(--border);-->
<!--  font-size: 14px;-->
<!--}-->
<!--.form-group input:focus {-->
<!--  outline: none;-->
<!--  border-color: var(--primary);-->
<!--  box-shadow: 0 0 0 2px rgba(37,99,235,0.1);-->
<!--}-->

<!--/* Button */-->
<!--.btn-primary {-->
<!--  margin-top: 24px;-->
<!--  background: var(--primary);-->
<!--  color: white;-->
<!--  border: none;-->
<!--  padding: 12px 24px;-->
<!--  border-radius: 8px;-->
<!--  font-weight: 600;-->
<!--  cursor: pointer;-->
<!--}-->
<!--.btn-primary:hover {-->
<!--  background: #1e40af;-->
<!--}-->

<!--/* Table */-->
<!--table {-->
<!--  width: 100%;-->
<!--  border-collapse: collapse;-->
<!--  margin-top: 20px;-->
<!--}-->
<!--th {-->
<!--  text-align: left;-->
<!--  font-size: 13px;-->
<!--  color: var(--muted);-->
<!--  border-bottom: 1px solid var(--border);-->
<!--  padding-bottom: 10px;-->
<!--}-->
<!--td {-->
<!--  padding: 16px 0;-->
<!--  border-bottom: 1px solid var(--border);-->
<!--}-->
<!--.status-on {-->
<!--  background: #dcfce7;-->
<!--  color: var(--success);-->
<!--  padding: 6px 12px;-->
<!--  border-radius: 20px;-->
<!--  font-size: 12px;-->
<!--}-->
<!--.status-off {-->
<!--  background: #fee2e2;-->
<!--  color: var(--danger);-->
<!--  padding: 6px 12px;-->
<!--  border-radius: 20px;-->
<!--  font-size: 12px;-->
<!--}-->
<!--.btn {-->
<!--  padding: 6px 14px;-->
<!--  border-radius: 6px;-->
<!--  font-size: 12px;-->
<!--  text-decoration: none;-->
<!--  font-weight: 600;-->
<!--}-->
<!--.toggle {-->
<!--  background: var(--primary);-->
<!--  color: white;-->
<!--}-->
<!--.delete {-->
<!--  border: 1px solid var(--danger);-->
<!--  color: var(--danger);-->
<!--  margin-left: 8px;-->
<!--}-->
<!--.delete:hover {-->
<!--  background: var(--danger);-->
<!--  color: white;-->
<!--}-->
<!--.empty {-->
<!--  text-align: center;-->
<!--  padding: 40px 0;-->
<!--  color: var(--muted);-->
<!--}-->
<!--</style>-->

<!--<script>-->
<!--function toggleTheme() {-->
<!--  document.body.classList.toggle("dark");-->
<!--  localStorage.setItem("theme", document.body.classList.contains("dark") ? "dark" : "light");-->
<!--}-->

<!--window.onload = function () {-->
<!--  if (localStorage.getItem("theme") === "dark") {-->
<!--    document.body.classList.add("dark");-->
<!--  }-->
<!--};-->
<!--</script>-->
<!--</head>-->

<!--<body>-->

<!--<div class="sidebar">-->
<!--  <h2>SHEMS</h2>-->
<!--  <a href="/">Home</a>-->
<!--  <a href="/dashboard">Dashboard</a>-->
<!--  <a href="/devices" class="active">Devices</a>-->
<!--  <a th:href="@{/logout}">Logout</a>-->
<!--</div>-->

<!--<div class="main">-->

<!--  <div class="topbar">-->
<!--    <h1>My Devices</h1>-->
<!--    <div class="theme-switch" onclick="toggleTheme()"></div>-->
<!--  </div>-->

<!--  <div class="content">-->

<!--     ADD DEVICE -->
<!--    <div class="card">-->
<!--      <h2>Add a Smart Device</h2>-->
<!--      <p>Connect a new device to track energy usage and enable control.</p>-->

<!--      <form th:action="@{/devices/add}" th:object="${device}" method="post">-->
<!--        <div class="form-grid">-->
<!--          <div class="form-group">-->
<!--            <label>Device Name</label>-->
<!--            <input type="text" th:field="*{name}" placeholder="Living Room AC">-->
<!--          </div>-->
<!--          <div class="form-group">-->
<!--            <label>Device Type</label>-->
<!--            <input type="text" th:field="*{type}" placeholder="Air Conditioner">-->
<!--          </div>-->
<!--          <div class="form-group">-->
<!--            <label>Installation Location</label>-->
<!--            <input type="text" th:field="*{location}" placeholder="Bedroom">-->
<!--          </div>-->
<!--          <div class="form-group">-->
<!--            <label>Power Rating (Watts)</label>-->
<!--            <input type="number" th:field="*{powerRating}" placeholder="1500">-->
<!--          </div>-->
<!--        </div>-->
<!--        <button type="submit" class="btn-primary">Add Device</button>-->
<!--      </form>-->
<!--    </div>-->

<!--     DEVICE LIST -->
<!--    <div class="card">-->
<!--      <h2>Connected Devices</h2>-->
<!--      <p>All smart devices linked to your account.</p>-->

<!--      <table>-->
<!--        <tr>-->
<!--          <th>Name</th>-->
<!--          <th>Type</th>-->
<!--          <th>Location</th>-->
<!--          <th>Status</th>-->
<!--          <th>Actions</th>-->
<!--        </tr>-->

<!--        <tr th:each="device : ${devices}">-->
<!--          <td th:text="${device.name}"></td>-->
<!--          <td th:text="${device.type}"></td>-->
<!--          <td th:text="${device.location}"></td>-->
<!--          <td>-->
<!--            <span th:if="${device.status}" class="status-on">ON</span>-->
<!--            <span th:unless="${device.status}" class="status-off">OFF</span>-->
<!--          </td>-->
<!--          <td>-->
<!--            <a th:href="@{'/devices/toggle/' + ${device.id}}" class="btn toggle">Toggle</a>-->
<!--            <a th:href="@{'/devices/delete/' + ${device.id}}" class="btn delete">Delete</a>-->
<!--          </td>-->
<!--        </tr>-->
<!--      </table>-->

<!--      <div th:if="${#lists.isEmpty(devices)}" class="empty">-->
<!--        No devices connected yet.-->
<!--      </div>-->

<!--    </div>-->

<!--  </div>-->
<!--</div>-->

<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>My Devices | SHEMS</title>

<style>
:root {
  --bg: #f5f7fb;
  --card: #ffffff;
  --text: #1e293b;
  --muted: #64748b;
  --primary: #2563eb;
  --border: #e2e8f0;
  --success: #16a34a;
  --danger: #dc2626;
}

body.dark {
  --bg: #0b1220;
  --card: #111827;
  --text: #f8fafc;
  --muted: #9ca3af;
  --border: #1f2937;
}

body {
  margin: 0;
  font-family: "Inter", Segoe UI, sans-serif;
  background: var(--bg);
  color: var(--text);
}

/* Sidebar */
.sidebar {
  width: 230px;
  height: 100vh;
  background: linear-gradient(180deg,#0f172a,#0b1220);
  position: fixed;
  padding-top: 30px;
  color: white;
}
.sidebar h2 {
  text-align: center;
  margin-bottom: 35px;
  font-size: 18px;
  letter-spacing: 1px;
}
.sidebar a {
  display: block;
  padding: 14px 30px;
  color: #cbd5e1;
  text-decoration: none;
  font-size: 14px;
  transition: 0.2s;
}
.sidebar a.active,
.sidebar a:hover {
  background: rgba(255,255,255,0.05);
  color: #fff;
  border-left: 3px solid var(--primary);
}

/* Main Layout */
.main { margin-left: 230px; }

/* Topbar */
.topbar {
  height: 90px;
  background: linear-gradient(90deg,#2563eb,#1e40af);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 40px;
  color: white;
}
.topbar h1 { margin: 0; font-size: 22px; }

/* Theme Switch */
.theme-switch {
  width: 46px;
  height: 24px;
  background: #bfdbfe;
  border-radius: 20px;
  position: relative;
  cursor: pointer;
}
.theme-switch::before {
  content: "";
  position: absolute;
  width: 18px;
  height: 18px;
  background: white;
  border-radius: 50%;
  top: 3px;
  left: 3px;
  transition: 0.3s;
}
body.dark .theme-switch { background: #60a5fa; }
body.dark .theme-switch::before { transform: translateX(22px); }

/* Content */
.content { padding: 40px; }

/* Card */
.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 28px;
  margin-bottom: 32px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.04);
}
.card h2 { margin: 0; font-size: 18px; }
.card p { color: var(--muted); margin: 6px 0 18px; font-size: 14px; }

/* Info Box */
.info-box {
  background: rgba(37,99,235,0.08);
  border-left: 4px solid var(--primary);
  padding: 14px 18px;
  border-radius: 8px;
  font-size: 13px;
  color: var(--text);
  margin-bottom: 20px;
}

/* Form */
.form-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 22px;
}
.form-group {
  display: flex;
  flex-direction: column;
}
.form-group label {
  font-size: 13px;
  font-weight: 600;
  margin-bottom: 6px;
}
.form-group small {
  font-size: 11px;
  color: var(--muted);
  margin-top: 4px;
}
.form-group input,
.form-group select {
  padding: 12px;
  border-radius: 8px;
  border: 1px solid var(--border);
  font-size: 14px;
}

/* Button */
.btn-primary {
  margin-top: 24px;
  background: var(--primary);
  color: white;
  border: none;
  padding: 12px 24px;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
}
.btn-primary:hover { background: #1e40af; }

/* Table */
table { width: 100%; border-collapse: collapse; margin-top: 20px; }
th {
  text-align: left;
  font-size: 13px;
  color: var(--muted);
  border-bottom: 1px solid var(--border);
  padding-bottom: 10px;
}
td {
  padding: 16px 0;
  border-bottom: 1px solid var(--border);
}
.status-on { background: #dcfce7; color: var(--success); padding: 6px 12px; border-radius: 20px; font-size: 12px; }
.status-off { background: #fee2e2; color: var(--danger); padding: 6px 12px; border-radius: 20px; font-size: 12px; }
.btn { padding: 6px 14px; border-radius: 6px; font-size: 12px; text-decoration: none; font-weight: 600; }
.toggle { background: var(--primary); color: white; }
.delete { border: 1px solid var(--danger); color: var(--danger); margin-left: 8px; }
.delete:hover { background: var(--danger); color: white; }
.empty { text-align: center; padding: 40px 0; color: var(--muted); }
</style>

<script>
function toggleTheme() {
  document.body.classList.toggle("dark");
  localStorage.setItem("theme", document.body.classList.contains("dark") ? "dark" : "light");
}

function handleNameChange(select) {
  const input = document.getElementById("customNameInput");
  input.style.display = select.value === "Other" ? "block" : "none";
  if(select.value !== "Other") input.value = select.value;
}

function handleLocationChange(select) {
  const input = document.getElementById("customLocationInput");
  input.style.display = select.value === "Other" ? "block" : "none";
  if(select.value !== "Other") input.value = select.value;
}

function handleTypeChange(select) {
  const input = document.getElementById("otherTypeInput");
  const powerInput = document.querySelector("input[name='powerRating']");
  input.style.display = select.value === "Other" ? "block" : "none";
  if(select.value !== "Other") input.value = select.value;

  const powerMap = {
    "Fan": 75,
    "Air Conditioner": 1500,
    "Light": 10,
    "Television": 120,
    "Refrigerator": 180,
    "Washing Machine": 500,
    "Heater": 2000
  };

  if (powerMap[select.value]) {
    powerInput.value = powerMap[select.value];
  }
}

window.onload = function () {
  if (localStorage.getItem("theme") === "dark") {
    document.body.classList.add("dark");
  }
};
</script>
</head>

<body>

<div class="sidebar">
  <h2>SHEMS</h2>
  <a href="/">Home</a>
  <a href="/dashboard">Dashboard</a>
  <a href="/devices" class="active">Devices</a>
  <a th:href="@{/logout}">Logout</a>
</div>

<div class="main">
  <div class="topbar">
    <h1>My Devices</h1>
    <div class="theme-switch" onclick="toggleTheme()"></div>
  </div>

  <div class="content">

    <div class="card">
      <h2>Add a Smart Device</h2>
      <p>Enter your appliance details so SHEMS can monitor and control it.</p>

      <div class="info-box">
        Example: <b>Living Room AC</b> • Type: <b>Air Conditioner</b> • Location: <b>Bedroom</b> • Power: <b>1500W</b>
      </div>

      <form th:action="@{/devices/add}" th:object="${device}" method="post">
        <div class="form-grid">

          <div class="form-group">
            <label>Device Name</label>
            <select onchange="handleNameChange(this)">
              <option value="">Select Device</option>
              <option>Living Room AC</option>
              <option>Bedroom Fan</option>
              <option>Hall Light</option>
              <option>Kitchen Refrigerator</option>
              <option>Bathroom Geyser</option>
              <option>Television</option>
              <option>Washing Machine</option>
              <option>Other</option>
            </select>
            <input type="text" id="customNameInput" th:field="*{name}" placeholder="Enter custom device name" style="display:none; margin-top:10px;">
          </div>

          <div class="form-group">
            <label>Device Type</label>
            <select onchange="handleTypeChange(this)">
              <option value="">Select Type</option>
              <option>Fan</option>
              <option>Air Conditioner</option>
              <option>Light</option>
              <option>Television</option>
              <option>Refrigerator</option>
              <option>Washing Machine</option>
              <option>Heater</option>
              <option>Other</option>
            </select>
            <input type="text" id="otherTypeInput" th:field="*{type}" placeholder="Enter custom device type" style="display:none; margin-top:10px;">
          </div>

          <div class="form-group">
            <label>Installation Location</label>
            <select onchange="handleLocationChange(this)">
              <option value="">Select Location</option>
              <option>Living Room</option>
              <option>Bedroom</option>
              <option>Kitchen</option>
              <option>Bathroom</option>
              <option>Dining Room</option>
              <option>Balcony</option>
              <option>Garage</option>
              <option>Office Room</option>
              <option>Other</option>
            </select>
            <input type="text" id="customLocationInput" th:field="*{location}" placeholder="Enter custom location" style="display:none; margin-top:10px;">
          </div>

          <div class="form-group">
            <label>Power Rating (Watts)</label>
            <input type="number" th:field="*{powerRating}" placeholder="1500">
          </div>

        </div>
        <button type="submit" class="btn-primary">Add Device</button>
      </form>
    </div>

    <div class="card">
      <h2>Connected Devices</h2>
      <p>All smart devices linked to your account.</p>

      <table>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Location</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>

        <tr th:each="device : ${devices}">
          <td th:text="${device.name}"></td>
          <td th:text="${device.type}"></td>
          <td th:text="${device.location}"></td>
          <td>
            <span th:if="${device.status}" class="status-on">ON</span>
            <span th:unless="${device.status}" class="status-off">OFF</span>
          </td>
          <td>
            <a th:href="@{'/devices/toggle/' + ${device.id}}" class="btn toggle">Toggle</a>
            <a th:href="@{'/devices/delete/' + ${device.id}}" class="btn delete">Delete</a>
          </td>
        </tr>
      </table>

      <div th:if="${#lists.isEmpty(devices)}" class="empty">
        No devices connected yet.
      </div>

    </div>

  </div>
</div>

</body>
</html>
